## Cache

Кеширование и ленивая загрузка.

Хранилище должно работать, даже если таблица не помещается в памяти. Для этого нужно реализовать механизм ленивой
загрузки, сделать кеш на слабых ссылках и оптимизировать работу size().

### Lazy Load

Когда требуется открыть таблицу, необязательно читать ее сразу всю. Можно читать только необходимую часть.
Например, когда вызывается API-метод, затрагивающий ключ K, нужно определить, в каком файле могут лежать данные
для этого ключа, и прочесть этот файл. Такой механизм загрузки и вычислений "по требованию" называется ленивым (lazy).

### Weak Cache

Ленивое чтение не избавит нас от ситуации, когда нет больше памяти для чтения еще одного файла. Необходимо перевести
in-memory map на использование слабых ссылок.

### Size precalculation

В ситуации, когда в памяти хранится одновременно не весь объем данных, расчет размера таблицы по требованию
затруднителен. Чтобы избавиться от расчетов size, нужно будет сохранять его отдельно при изменениях. При создании
таблицы очевидно, что size = 0. Далее, при каждом коммите нужно считать число добавленных и удаленных элементов и изменять
size соответственно. Для обеспечения перзистентности size нужно сохранять в человекочитаемой форме в файл size.tsv в корне
таблицы.

Если файла size.tsv не оказалось в директории БД, то надо его создать с правильным содержимым.
